<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Secured Web Information System Prototype | Yaotian Huang</title>
<meta name="keywords" content="Java, Servlet, JSP, Tomcat, HTML, CSS, JavaScript">
<meta name="description" content="View the full project here: Github Repo
Introduction In a recent academic project, I implemented a secured web information system using Java Servlet and created several content pages including AboutMe, Skills, and Contact pages for testing my system.
The goal was to implement a web application that could allow users to login, logout and view their profile. The application also had to be secured against unauthorized access such as directly typing the content page URL.">
<meta name="author" content="sky_haihai">
<link rel="canonical" href="https://sky-haihai.github.io/Yaotian-Huang/posts/uni/secured-web-information-system-prototype/">
<link crossorigin="anonymous" href="/Yaotian-Huang/assets/css/stylesheet.62aa25427797f8efd87301a5b69795dc50df2dbe79a5fba0648cc7bb8dbcd7c9.css" integrity="sha256-YqolQneX&#43;O/YcwGltpeV3FDfLb55pfugZIzHu42818k=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/Yaotian-Huang/assets/js/highlight.acb54fd32bbc1982428b8850317e45d076b95012730a5936667e6bc21777692a.js" integrity="sha256-rLVP0yu8GYJCi4hQMX5F0Ha5UBJzClk2Zn5rwhd3aSo="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://sky-haihai.github.io/Yaotian-Huang/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://sky-haihai.github.io/Yaotian-Huang/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://sky-haihai.github.io/Yaotian-Huang/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://sky-haihai.github.io/Yaotian-Huang/apple-touch-icon.png">
<link rel="mask-icon" href="https://sky-haihai.github.io/Yaotian-Huang/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Secured Web Information System Prototype" />
<meta property="og:description" content="View the full project here: Github Repo
Introduction In a recent academic project, I implemented a secured web information system using Java Servlet and created several content pages including AboutMe, Skills, and Contact pages for testing my system.
The goal was to implement a web application that could allow users to login, logout and view their profile. The application also had to be secured against unauthorized access such as directly typing the content page URL." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://sky-haihai.github.io/Yaotian-Huang/posts/uni/secured-web-information-system-prototype/" /><meta property="og:image" content="https://sky-haihai.github.io/Yaotian-Huang/papermod-cover.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-07T02:26:29-04:00" />
<meta property="article:modified_time" content="2023-05-07T02:26:29-04:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://sky-haihai.github.io/Yaotian-Huang/papermod-cover.png"/>

<meta name="twitter:title" content="Secured Web Information System Prototype"/>
<meta name="twitter:description" content="View the full project here: Github Repo
Introduction In a recent academic project, I implemented a secured web information system using Java Servlet and created several content pages including AboutMe, Skills, and Contact pages for testing my system.
The goal was to implement a web application that could allow users to login, logout and view their profile. The application also had to be secured against unauthorized access such as directly typing the content page URL."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://sky-haihai.github.io/Yaotian-Huang/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Secured Web Information System Prototype",
      "item": "https://sky-haihai.github.io/Yaotian-Huang/posts/uni/secured-web-information-system-prototype/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Secured Web Information System Prototype",
  "name": "Secured Web Information System Prototype",
  "description": "View the full project here: Github Repo\nIntroduction In a recent academic project, I implemented a secured web information system using Java Servlet and created several content pages including AboutMe, Skills, and Contact pages for testing my system.\nThe goal was to implement a web application that could allow users to login, logout and view their profile. The application also had to be secured against unauthorized access such as directly typing the content page URL.",
  "keywords": [
    "Java", "Servlet", "JSP", "Tomcat", "HTML", "CSS", "JavaScript"
  ],
  "articleBody": "View the full project here: Github Repo\nIntroduction In a recent academic project, I implemented a secured web information system using Java Servlet and created several content pages including AboutMe, Skills, and Contact pages for testing my system.\nThe goal was to implement a web application that could allow users to login, logout and view their profile. The application also had to be secured against unauthorized access such as directly typing the content page URL.\nThe URL of the deployed website on the school SIT server is: http://sit.itec.yorku.ca:8080/itec4020grp9/\n⚠️ Note\nThe website is deployed on the school System Integration Testing(SIT) server. Access it requires a York University VPN. Please contact me if you are interested and I will send you a video demo of the website.\nEnvironment Server Tomcat 7.0.76 JavaSE 8 Local JavaSE 8 ⚠️ Must match the version of the server side VS Code (with the following extensions) Language Support for Java(TM) by Red Hat v1.18.0 Project Manager for Java v0.22.0 Structure Overview website\r├── css\r│ ├── preventPrint.css\r│ ├── useDefaultCursor.css\r│ └── ...\r├── images // images that do not need to be protected\r├── js\r│ ├── disableDragging.js\r│ ├── disableSavingImg.js\r│ └── disableSelection.js\r├── src\r│ ├── util\r│ │ └── ImageHelper.java\r│ ├── LoginServlet.java\r│ ├── LogoutServlet.java\r│ ├── AboutMeServlet.java\r│ └── ...\r├── WEB-INF\r│ ├── classes\r│ │ ├── util\r│ │ │ ├── ImageHelper.class\r│ │ ├── LoginServlet.class\r│ │ ├── LogoutServlet.class\r│ │ ├── AboutMeServlet.class\r│ │ └── ...\r│ ├── images // images that need to be protected\r│ │ ├── user_icon.png\r│ │ └── ...\r│ └── lib\r│ └── javax.servlet-api-3.0.1.jar\r├── index.jsp\r├── readme.txt //instructions for setting up the environment ⚠️ Note Servlet api version 3.0.x is supported by Tomcat 7.0.76. If you are using a different version of Tomcat, you may need to change the version of the servlet api jar file.\nImplementation User Authentication Login For simplicity, the login page is implemented inside index.jsp. A login form is submitted to the LoginServlet.class. when the user clicks the login button.\nSince this was a school project, the username and password are hard-coded in the Controller layer. In a real-world application, the username and password should be stored in a database and accessed by Data Access Object(DAO) layer.\nprivate final String fakeUsername = \"admin\"; private final String fakePassword = \"admin\"; String username = request.getParameter(\"username\"); String password = request.getParameter(\"password\"); boolean inputMatches = fakeUserName.equals(username) \u0026\u0026 fakePassword.equals(password); if (inputMatches) { session.setAttribute(\"userId\",username); response.sendRedirect(\"aboutme\"); return; } Source LoginServlet.java\n⚠️ Note As the user authentication details, such as the username and password, are transmitted through an HTML form, it is recommended to implement the authentication logic in the doPost() method rather than the doGet() method. Otherwise, the user authentication information will be exposed in the URL, causing security issues.\nLogout The logout page is much simpler. It only needs to invalidate the session and redirect the user to the login page. This logic can be implemented inside either the doGet() method or the doPost() method.\nHttpSession session = request.getSession(false); if (session != null) { session.removeAttribute(\"userId\"); } response.sendRedirect(\"index.jsp\"); Source Logout.java\nSecured Content Pages For each protected content page, the servlet class needs to check if the user has logged in. If the user has not logged in, the servlet class will redirect the user to the login page.\nCheck if the user has logged in:\n// check if user is logged in HttpSession session = request.getSession(false); if (session == null || session.getAttribute(\"userId\") == null) { response.sendRedirect(\"index.jsp\"); return; } Disable Caching:\nresponse.setHeader(\"Cache-Control\", \"no-cache, no-store, must-revalidate\"); response.setHeader(\"Pragma\", \"no-cache\"); response.setDateHeader(\"Expires\", 0); Actually writing the content of the page:\nresponse.setContentType(\"text/html\"); PrintWriter out = response.getWriter(); out.println(\"\"); out.println(\"\"); out.println(\"AboutMe\"); out.println(\"\"); out.println(\"\"); out.println(\"\"); out.println(\"\"); out.println(\"\"); out.println(\"\"); out.println(\"\"); out.println(\"\"); ... out.println(\"\"); out.println(\"\"); out.println(\"\"); out.println(\"\"); out.println(\"\"); Source AboutMeServlet.java\nImage Protection The images that need to be protected are put into the WEB-INF folder. WEB-INF folder is a special folder which is protected by web application containers like Tomcat. Anything inside will not be accessable directly through a URL such as https://www.example.com/WEB-INF/images/user_icon.png\nTo read the image file, pass the relative path of the image file to the Servlet API:\n// path: \"/WEB-INF/images/user_icon.png\" InputStream inputStream = context.getResourceAsStream(path); Finally read the Input Stream and convert the image into data URI schemes to completely hide the image URL:\nimageStr = Base64.getEncoder().encodeToString(imageData); Source ImageHelper.java\nThen include the URI schemes in the HTML:\nout.println(\"\"); Source AboutMeServlet.java\nPreventing Unwanted User Actions To prevent users from saving images on the web pages:\ndocument.addEventListener( \"contextmenu\", function (e) { e.preventDefault(); }, false ); Source disableSavingImg.js\nTo prevent users from selecting text on the web pages:\nif (typeof document.onselectstart != \"undefined\") { document.onselectstart = new Function(\"return false\"); } else { document.onmousedown = function () { return false; }; document.onmouseup = function () { return true; }; } Source disableSelection.js\nTo prevent users from dragging images on the web pages:\ndocument.addEventListener(\"dragstart\", function (event) { event.preventDefault(); }); Source disableDragging.js\nTo prevent users from printing the web pages:\n@media print { body * { visibility: hidden; } } Source preventPrint.css\nDeployment Step 0: Prerequisites (Done by the server administrator) Install JavaSE 8 on the server machine. Install Apache Tomcat 7.0.76 on the server machine. Step 1: Download SSH/FTP client For windows users:\nSSH client: Putty FTP client: WinSCP Step 2: Upload the website folder to the server tag every servlet class with @WebServlet(\"/path\") annotation. @WebServlet(\"/aboutme\")\rpublic class AboutMeServlet extends HttpServlet {\r...\r} path is the URL path to access the servlet. For example, the above servlet can be accessed by the URL: http://localhost:8080/itec4020grp9/aboutme\nalternitively, add the following code to the web.xml file to map the servlet to a URL path. The web.xml file should be created in the WEB-INF folder like this:\n",
  "wordCount" : "1380",
  "inLanguage": "en",
  "datePublished": "2023-05-07T02:26:29-04:00",
  "dateModified": "2023-05-07T02:26:29-04:00",
  "author":{
    "@type": "Person",
    "name": "sky_haihai"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://sky-haihai.github.io/Yaotian-Huang/posts/uni/secured-web-information-system-prototype/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Yaotian Huang",
    "logo": {
      "@type": "ImageObject",
      "url": "https://sky-haihai.github.io/Yaotian-Huang/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://sky-haihai.github.io/Yaotian-Huang/" accesskey="h" title="Yaotian Huang (Alt + H)">Yaotian Huang</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://sky-haihai.github.io/Yaotian-Huang/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://sky-haihai.github.io/Yaotian-Huang/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://sky-haihai.github.io/Yaotian-Huang/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://sky-haihai.github.io/Yaotian-Huang/">Home</a>&nbsp;»&nbsp;<a href="https://sky-haihai.github.io/Yaotian-Huang/posts/">Posts</a></div>
    <h1 class="post-title">
      Secured Web Information System Prototype
    </h1>
    <div class="post-meta"><span title='2023-05-07 02:26:29 -0400 EDT'>May 7, 2023</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;sky_haihai

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#introduction" aria-label="Introduction">Introduction</a></li>
                <li>
                    <a href="#environment" aria-label="Environment">Environment</a><ul>
                        
                <li>
                    <a href="#server" aria-label="Server">Server</a></li>
                <li>
                    <a href="#local" aria-label="Local">Local</a></li></ul>
                </li>
                <li>
                    <a href="#structure-overview" aria-label="Structure Overview">Structure Overview</a></li>
                <li>
                    <a href="#implementation" aria-label="Implementation">Implementation</a><ul>
                        
                <li>
                    <a href="#user-authentication" aria-label="User Authentication">User Authentication</a><ul>
                        
                <li>
                    <a href="#login" aria-label="Login">Login</a></li>
                <li>
                    <a href="#logout" aria-label="Logout">Logout</a></li></ul>
                </li>
                <li>
                    <a href="#secured-content-pages" aria-label="Secured Content Pages">Secured Content Pages</a></li>
                <li>
                    <a href="#image-protection" aria-label="Image Protection">Image Protection</a></li>
                <li>
                    <a href="#preventing-unwanted-user-actions" aria-label="Preventing Unwanted User Actions">Preventing Unwanted User Actions</a></li></ul>
                </li>
                <li>
                    <a href="#deployment" aria-label="Deployment">Deployment</a><ul>
                        
                <li>
                    <a href="#step-0-prerequisites-done-by-the-server-administrator" aria-label="Step 0: Prerequisites (Done by the server administrator)">Step 0: Prerequisites (Done by the server administrator)</a></li>
                <li>
                    <a href="#step-1-download-sshftp-client" aria-label="Step 1: Download SSH/FTP client">Step 1: Download SSH/FTP client</a></li>
                <li>
                    <a href="#step-2-upload-the-website-folder-to-the-server" aria-label="Step 2: Upload the website folder to the server">Step 2: Upload the website folder to the server</a></li>
                <li>
                    <a href="#step-3-deploy-the-website-on-the-tomcat-server" aria-label="Step 3: Deploy the website on the Tomcat server">Step 3: Deploy the website on the Tomcat server</a></li>
                <li>
                    <a href="#step-4-making-changes-to-the-website" aria-label="Step 4: Making changes to the website">Step 4: Making changes to the website</a></li></ul>
                </li>
                <li>
                    <a href="#test-cases" aria-label="Test Cases">Test Cases</a><ul>
                        
                <li>
                    <a href="#case-1" aria-label="Case 1">Case 1</a></li>
                <li>
                    <a href="#case-2" aria-label="Case 2">Case 2</a></li>
                <li>
                    <a href="#case-3" aria-label="Case 3">Case 3</a></li>
                <li>
                    <a href="#case-4" aria-label="Case 4">Case 4</a></li>
                <li>
                    <a href="#case-5" aria-label="Case 5">Case 5</a></li>
                <li>
                    <a href="#case-6" aria-label="Case 6">Case 6</a></li>
                <li>
                    <a href="#case-7" aria-label="Case 7">Case 7</a></li>
                <li>
                    <a href="#case-8" aria-label="Case 8">Case 8</a></li></ul>
                </li>
                <li>
                    <a href="#future-improvements" aria-label="Future Improvements">Future Improvements</a></li>
                <li>
                    <a href="#conclusion" aria-label="Conclusion">Conclusion</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>View the full project here: <a href="https://github.com/sky-haihai/4020A2-Secured-Web-IS.git">Github Repo</a></p>
<h2 id="introduction">Introduction<a hidden class="anchor" aria-hidden="true" href="#introduction">#</a></h2>
<p>In a recent academic project, I implemented a secured web information system using Java Servlet and created several content pages including AboutMe, Skills, and Contact pages for testing my system.</p>
<p>The goal was to implement a web application that could allow users to login, logout and view their profile. The application also had to be secured against unauthorized access such as directly typing the content page URL.</p>
<p>The URL of the deployed website on the school SIT server is:
<a href="http://sit.itec.yorku.ca:8080/itec4020grp9/">http://sit.itec.yorku.ca:8080/itec4020grp9/</a></p>
<blockquote>
<p>⚠️ <strong>Note</strong><br>
The website is deployed on the school System Integration Testing(SIT) server. Access it requires a York University VPN. Please contact me if you are interested and I will send you a video demo of the website.</p>
</blockquote>
<h2 id="environment">Environment<a hidden class="anchor" aria-hidden="true" href="#environment">#</a></h2>
<h3 id="server">Server<a hidden class="anchor" aria-hidden="true" href="#server">#</a></h3>
<ul>
<li>Tomcat 7.0.76</li>
<li>JavaSE 8</li>
</ul>
<h3 id="local">Local<a hidden class="anchor" aria-hidden="true" href="#local">#</a></h3>
<ul>
<li>JavaSE 8 ⚠️ Must match the version of the server side</li>
<li>VS Code (with the following extensions)
<ul>
<li>Language Support for Java(TM) by Red Hat <code>v1.18.0</code></li>
<li>Project Manager for Java <code>v0.22.0</code></li>
</ul>
</li>
</ul>
<h2 id="structure-overview">Structure Overview<a hidden class="anchor" aria-hidden="true" href="#structure-overview">#</a></h2>
<pre tabindex="0"><code>website
├── css
│       ├── preventPrint.css
│       ├── useDefaultCursor.css
│       └── ...
├── images // images that do not need to be protected
├── js
│       ├── disableDragging.js
│       ├── disableSavingImg.js
│       └── disableSelection.js
├── src
│       ├── util
│       │   └── ImageHelper.java
│       ├── LoginServlet.java
│       ├── LogoutServlet.java
│       ├── AboutMeServlet.java
│       └── ...
├── WEB-INF
│       ├── classes
│       │       ├── util
│       │       │       ├── ImageHelper.class
│       │       ├── LoginServlet.class
│       │       ├── LogoutServlet.class
│       │       ├── AboutMeServlet.class
│       │       └── ...
│       ├── images // images that need to be protected
│       │       ├── user_icon.png
│       │       └── ...
│       └── lib
│               └── javax.servlet-api-3.0.1.jar
├── index.jsp
├── readme.txt //instructions for setting up the environment
</code></pre><blockquote>
<p>⚠️ <strong>Note</strong> <br>
Servlet api version 3.0.x is supported by Tomcat 7.0.76. If you are using a different version of Tomcat, you may need to change the version of the servlet api jar file.</p>
</blockquote>
<h2 id="implementation">Implementation<a hidden class="anchor" aria-hidden="true" href="#implementation">#</a></h2>
<h3 id="user-authentication">User Authentication<a hidden class="anchor" aria-hidden="true" href="#user-authentication">#</a></h3>
<h4 id="login">Login<a hidden class="anchor" aria-hidden="true" href="#login">#</a></h4>
<p>For simplicity, the login page is implemented inside <code>index.jsp</code>. A login form is submitted to the <code>LoginServlet.class</code>. when the user clicks the login button.</p>
<p>Since this was a school project, the username and password are hard-coded in the <strong>Controller</strong> layer. In a real-world application, the username and password should be stored in a database and accessed by <strong>Data Access Object(DAO)</strong> layer.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> String fakeUsername <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;admin&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> String fakePassword <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;admin&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>String username <span style="color:#f92672">=</span> request<span style="color:#f92672">.</span><span style="color:#a6e22e">getParameter</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;username&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>String password <span style="color:#f92672">=</span> request<span style="color:#f92672">.</span><span style="color:#a6e22e">getParameter</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;password&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">boolean</span> inputMatches <span style="color:#f92672">=</span> fakeUserName<span style="color:#f92672">.</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span>username<span style="color:#f92672">)</span> <span style="color:#f92672">&amp;&amp;</span> fakePassword<span style="color:#f92672">.</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span>password<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>inputMatches<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>	session<span style="color:#f92672">.</span><span style="color:#a6e22e">setAttribute</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;userId&#34;</span><span style="color:#f92672">,</span>username<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>	response<span style="color:#f92672">.</span><span style="color:#a6e22e">sendRedirect</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;aboutme&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Source <a href="https://github.com/sky-haihai/4020A2-Secured-Web-IS/blob/fc29ffe396baaaaa47062d61970c054b70014d36/website/src/LoginServlet.java">LoginServlet.java</a></p>
<blockquote>
<p>⚠️ <strong>Note</strong> <br>
As the user authentication details, such as the username and password, are transmitted through an HTML form, it is recommended to implement the authentication logic in the doPost() method rather than the doGet() method. Otherwise, the user authentication information will be exposed in the URL, causing security issues.</p>
</blockquote>
<h4 id="logout">Logout<a hidden class="anchor" aria-hidden="true" href="#logout">#</a></h4>
<p>The logout page is much simpler. It only needs to invalidate the session and redirect the user to the login page. This logic can be implemented inside either the doGet() method or the doPost() method.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>HttpSession session <span style="color:#f92672">=</span> request<span style="color:#f92672">.</span><span style="color:#a6e22e">getSession</span><span style="color:#f92672">(</span><span style="color:#66d9ef">false</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>session <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>	session<span style="color:#f92672">.</span><span style="color:#a6e22e">removeAttribute</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;userId&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>response<span style="color:#f92672">.</span><span style="color:#a6e22e">sendRedirect</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;index.jsp&#34;</span><span style="color:#f92672">);</span>
</span></span></code></pre></div><p>Source <a href="https://github.com/sky-haihai/4020A2-Secured-Web-IS/blob/fc29ffe396baaaaa47062d61970c054b70014d36/website/src/LogoutServlet.java">Logout.java</a></p>
<h3 id="secured-content-pages">Secured Content Pages<a hidden class="anchor" aria-hidden="true" href="#secured-content-pages">#</a></h3>
<p>For each protected content page, the servlet class needs to check if the user has logged in. If the user has not logged in, the servlet class will redirect the user to the login page.</p>
<p>Check if the user has logged in:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// check if user is logged in
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>HttpSession session <span style="color:#f92672">=</span> request<span style="color:#f92672">.</span><span style="color:#a6e22e">getSession</span><span style="color:#f92672">(</span><span style="color:#66d9ef">false</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>session <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> session<span style="color:#f92672">.</span><span style="color:#a6e22e">getAttribute</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;userId&#34;</span><span style="color:#f92672">)</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    response<span style="color:#f92672">.</span><span style="color:#a6e22e">sendRedirect</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;index.jsp&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Disable Caching:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>response<span style="color:#f92672">.</span><span style="color:#a6e22e">setHeader</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Cache-Control&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;no-cache, no-store, must-revalidate&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>response<span style="color:#f92672">.</span><span style="color:#a6e22e">setHeader</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Pragma&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;no-cache&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>response<span style="color:#f92672">.</span><span style="color:#a6e22e">setDateHeader</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Expires&#34;</span><span style="color:#f92672">,</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">);</span>
</span></span></code></pre></div><p>Actually writing the content of the page:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>response<span style="color:#f92672">.</span><span style="color:#a6e22e">setContentType</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;text/html&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>PrintWriter out <span style="color:#f92672">=</span> response<span style="color:#f92672">.</span><span style="color:#a6e22e">getWriter</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>out<span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&lt;html&gt;&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>out<span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&lt;head&gt;&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>out<span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&lt;title&gt;AboutMe&lt;/title&gt;&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>out<span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&lt;link rel=\&#34;stylesheet\&#34; href=\&#34;css/reset.css\&#34;&gt;&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>out<span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&lt;link rel=\&#34;stylesheet\&#34; href=\&#34;css/useDefaultCursor.css\&#34;&gt;&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>out<span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&lt;link rel=\&#34;stylesheet\&#34; href=\&#34;css/preventPrint.css\&#34;&gt;&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>out<span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&lt;link rel=\&#34;stylesheet\&#34; href=\&#34;css/credit.css\&#34;&gt;&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>out<span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&lt;link rel=\&#34;stylesheet\&#34; href=\&#34;css/profile.css\&#34;&gt;&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>out<span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&lt;link rel=\&#34;stylesheet\&#34; href=\&#34;css/aboutme.css\&#34;&gt;&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>out<span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&lt;/head&gt;&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>out<span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&lt;body&gt;&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>out<span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&lt;/body&gt;&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>out<span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&lt;script src=&#39;js/disableSelection.js&#39;&gt;&lt;/script&gt;&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>out<span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&lt;script src=&#39;js/disableSavingImg.js&#39;&gt;&lt;/script&gt;&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>out<span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&lt;script src=&#39;js/disableDragging.js&#39;&gt;&lt;/script&gt;&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>out<span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&lt;/html&gt;&#34;</span><span style="color:#f92672">);</span>
</span></span></code></pre></div><p>Source <a href="https://github.com/sky-haihai/4020A2-Secured-Web-IS/blob/fc29ffe396baaaaa47062d61970c054b70014d36/website/src/AboutMeServlet.java">AboutMeServlet.java</a></p>
<h3 id="image-protection">Image Protection<a hidden class="anchor" aria-hidden="true" href="#image-protection">#</a></h3>
<p>The images that need to be protected are put into the <code>WEB-INF</code> folder. <code>WEB-INF</code> folder is a special folder which is protected by web application containers like Tomcat. Anything inside will not be accessable directly through a URL such as <code>https://www.example.com/WEB-INF/images/user_icon.png</code></p>
<p>To read the image file, pass the relative path of the image file to the Servlet API:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// path: &#34;/WEB-INF/images/user_icon.png&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>InputStream inputStream <span style="color:#f92672">=</span> context<span style="color:#f92672">.</span><span style="color:#a6e22e">getResourceAsStream</span><span style="color:#f92672">(</span>path<span style="color:#f92672">);</span>
</span></span></code></pre></div><p>Finally read the Input Stream and convert the image into data URI schemes to completely hide the image URL:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>imageStr <span style="color:#f92672">=</span> Base64<span style="color:#f92672">.</span><span style="color:#a6e22e">getEncoder</span><span style="color:#f92672">().</span><span style="color:#a6e22e">encodeToString</span><span style="color:#f92672">(</span>imageData<span style="color:#f92672">);</span>
</span></span></code></pre></div><p>Source <a href="https://github.com/sky-haihai/4020A2-Secured-Web-IS/blob/fc29ffe396baaaaa47062d61970c054b70014d36/website/src/util/ImageHelper.java">ImageHelper.java</a></p>
<p>Then include the URI schemes in the HTML:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>out<span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&lt;img src=&#39;data:image/png;base64,&#34;</span> <span style="color:#f92672">+</span> imageStr <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;&#39; /&gt;&#34;</span><span style="color:#f92672">);</span>
</span></span></code></pre></div><p>Source <a href="https://github.com/sky-haihai/4020A2-Secured-Web-IS/blob/fc29ffe396baaaaa47062d61970c054b70014d36/website/src/AboutMeServlet.java">AboutMeServlet.java</a></p>
<h3 id="preventing-unwanted-user-actions">Preventing Unwanted User Actions<a hidden class="anchor" aria-hidden="true" href="#preventing-unwanted-user-actions">#</a></h3>
<p>To prevent users from saving images on the web pages:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>document.<span style="color:#a6e22e">addEventListener</span>(
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;contextmenu&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">preventDefault</span>();
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><p>Source <a href="https://github.com/sky-haihai/4020A2-Secured-Web-IS/blob/fc29ffe396baaaaa47062d61970c054b70014d36/website/js/disableSavingImg.js">disableSavingImg.js</a></p>
<p>To prevent users from selecting text on the web pages:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">typeof</span> document.<span style="color:#a6e22e">onselectstart</span> <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;undefined&#34;</span>) {
</span></span><span style="display:flex;"><span>  document.<span style="color:#a6e22e">onselectstart</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Function(<span style="color:#e6db74">&#34;return false&#34;</span>);
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>  document.<span style="color:#a6e22e">onmousedown</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> () {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  document.<span style="color:#a6e22e">onmouseup</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> () {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Source <a href="https://github.com/sky-haihai/4020A2-Secured-Web-IS/blob/fc29ffe396baaaaa47062d61970c054b70014d36/website/js/disableSelection.js">disableSelection.js</a></p>
<p>To prevent users from dragging images on the web pages:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>document.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#34;dragstart&#34;</span>, <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">event</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">preventDefault</span>();
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><p>Source <a href="https://github.com/sky-haihai/4020A2-Secured-Web-IS/blob/fc29ffe396baaaaa47062d61970c054b70014d36/website/js/disableDragging.js">disableDragging.js</a></p>
<p>To prevent users from printing the web pages:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>@<span style="color:#66d9ef">media</span> <span style="color:#f92672">print</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">body</span> <span style="color:#f92672">*</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">visibility</span>: <span style="color:#66d9ef">hidden</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Source <a href="https://github.com/sky-haihai/4020A2-Secured-Web-IS/blob/fc29ffe396baaaaa47062d61970c054b70014d36/website/css/preventPrint.css">preventPrint.css</a></p>
<h2 id="deployment">Deployment<a hidden class="anchor" aria-hidden="true" href="#deployment">#</a></h2>
<h3 id="step-0-prerequisites-done-by-the-server-administrator">Step 0: Prerequisites (Done by the server administrator)<a hidden class="anchor" aria-hidden="true" href="#step-0-prerequisites-done-by-the-server-administrator">#</a></h3>
<ol>
<li>Install <a href="https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html">JavaSE 8</a> on the server machine.</li>
<li>Install <a href="https://archive.apache.org/dist/tomcat/tomcat-7/v7.0.76/bin/">Apache Tomcat 7.0.76</a> on the server machine.</li>
</ol>
<h3 id="step-1-download-sshftp-client">Step 1: Download SSH/FTP client<a hidden class="anchor" aria-hidden="true" href="#step-1-download-sshftp-client">#</a></h3>
<p>For windows users:</p>
<ul>
<li>SSH client: <a href="https://www.putty.org/">Putty</a></li>
<li>FTP client: <a href="https://winscp.net/eng/download.php">WinSCP</a></li>
</ul>
<h3 id="step-2-upload-the-website-folder-to-the-server">Step 2: Upload the website folder to the server<a hidden class="anchor" aria-hidden="true" href="#step-2-upload-the-website-folder-to-the-server">#</a></h3>
<ol>
<li>tag every servlet class with <code>@WebServlet(&quot;/path&quot;)</code> annotation.</li>
</ol>
<pre tabindex="0"><code>@WebServlet(&#34;/aboutme&#34;)
public class AboutMeServlet extends HttpServlet {
    ...
}
</code></pre><p>path is the URL path to access the servlet. For example, the above servlet can be accessed by the URL: <code>http://localhost:8080/itec4020grp9/aboutme</code></p>
<ol start="2">
<li>alternitively, add the following code to the <code>web.xml</code> file to map the servlet to a URL path.</li>
</ol>
<p>The <code>web.xml</code> file should be created in the <code>WEB-INF</code> folder like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;web-app</span> <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://java.sun.com/xml/ns/javaee&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:xsi=</span><span style="color:#e6db74">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xsi:schemaLocation=</span><span style="color:#e6db74">&#34;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">version=</span><span style="color:#e6db74">&#34;3.0&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;servlet&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;servlet-name&gt;</span>AboutMeServlet<span style="color:#f92672">&lt;/servlet-name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;servlet-class&gt;</span>AboutMeServlet<span style="color:#f92672">&lt;/servlet-class&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/servlet&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/web-app&gt;</span>
</span></span></code></pre></div><p>To include Servlets to the <code>web.xml</code> file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;servlet&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;servlet-name&gt;</span>MyServlet<span style="color:#f92672">&lt;/servlet-name&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;servlet-class&gt;</span>/path/to/myServlet<span style="color:#f92672">&lt;/servlet-class&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/servlet&gt;</span>
</span></span></code></pre></div><p>To include JSP files to the <code>web.xml</code> file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;servlet&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;servlet-name&gt;</span>MyJsp<span style="color:#f92672">&lt;/servlet-name&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;jsp-file&gt;</span>/path/to/myJsp<span style="color:#f92672">&lt;/jsp-file&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/servlet&gt;</span>
</span></span></code></pre></div><p><strong>Note</strong></p>
<ol>
<li>The path does not need to include the file extension.</li>
<li>The path is relative to the <code>WEB-INF/classes</code> folder.</li>
<li>make sure all Java Servlet classes are compiled into <code>WEB-INF/classes</code> folder.</li>
</ol>
<h3 id="step-3-deploy-the-website-on-the-tomcat-server">Step 3: Deploy the website on the Tomcat server<a hidden class="anchor" aria-hidden="true" href="#step-3-deploy-the-website-on-the-tomcat-server">#</a></h3>
<ol>
<li>To deploy the website on the Tomcat server, simply copy the website folder to the <code>webapps</code> folder of the Tomcat server.</li>
</ol>
<h3 id="step-4-making-changes-to-the-website">Step 4: Making changes to the website<a hidden class="anchor" aria-hidden="true" href="#step-4-making-changes-to-the-website">#</a></h3>
<ol>
<li>Upload the changes to the server.</li>
<li>Restart the Tomcat server. <strong>Not Practical</strong> if you are not the server administrator.</li>
<li>Alternatively, slightly changing the <code>web.xml</code> file back and forth will trigger a kind of reload event inside Tomcat. <strong>Not Elegant</strong> but Practical😗</li>
</ol>
<h2 id="test-cases">Test Cases<a hidden class="anchor" aria-hidden="true" href="#test-cases">#</a></h2>
<h3 id="case-1">Case 1<a hidden class="anchor" aria-hidden="true" href="#case-1">#</a></h3>
<p>A user cannot get into the secured Web information system after logout by clicking on the browser&rsquo;s back button or typing in the URL address directly.</p>
<h3 id="case-2">Case 2<a hidden class="anchor" aria-hidden="true" href="#case-2">#</a></h3>
<p>The user has to login using userid and password in order to get into the secured website after logout.</p>
<h3 id="case-3">Case 3<a hidden class="anchor" aria-hidden="true" href="#case-3">#</a></h3>
<p>All the URL addresses of the secured Web information system need to be protected.</p>
<h3 id="case-4">Case 4<a hidden class="anchor" aria-hidden="true" href="#case-4">#</a></h3>
<p>The image files of secured Web pages shouldn’t be allowed to save on the client’s local machine.</p>
<h3 id="case-5">Case 5<a hidden class="anchor" aria-hidden="true" href="#case-5">#</a></h3>
<p>After closing the browser, the user cannot get into the secured Web information system without login again.</p>
<h3 id="case-6">Case 6<a hidden class="anchor" aria-hidden="true" href="#case-6">#</a></h3>
<p>Users cannot copy and paste the text information on the secured Web pages.</p>
<h3 id="case-7">Case 7<a hidden class="anchor" aria-hidden="true" href="#case-7">#</a></h3>
<p>Some secured pages should not be able to be printed, for example, by using a browser’s print function.</p>
<h3 id="case-8">Case 8<a hidden class="anchor" aria-hidden="true" href="#case-8">#</a></h3>
<p>Information on the server side(e.g. Image URL) should be protected.</p>
<h2 id="future-improvements">Future Improvements<a hidden class="anchor" aria-hidden="true" href="#future-improvements">#</a></h2>
<ol>
<li>Use a database to store user information instead of hard-coding the user information in the Java Servlet code.</li>
<li>Use <code>&lt;canvas&gt;</code> tags on html to display the secured content pages instead of disabling user actions on the web pages. Because disabling user actions may have a negative impact on the overall user experience and the logic is handled on the client-side which is not secure.</li>
</ol>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>In conclusion, I have successfully implemented a secured web information system. The system is secured by using HTTPS, Tomcat and Java Servlet. The system is protected from unauthorized user accesses and also protected from unwanted user actions such as saving images, selecting text, dragging images, and printing the web pages.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://sky-haihai.github.io/Yaotian-Huang/tags/java/">Java</a></li>
      <li><a href="https://sky-haihai.github.io/Yaotian-Huang/tags/servlet/">Servlet</a></li>
      <li><a href="https://sky-haihai.github.io/Yaotian-Huang/tags/jsp/">JSP</a></li>
      <li><a href="https://sky-haihai.github.io/Yaotian-Huang/tags/tomcat/">Tomcat</a></li>
      <li><a href="https://sky-haihai.github.io/Yaotian-Huang/tags/html/">HTML</a></li>
      <li><a href="https://sky-haihai.github.io/Yaotian-Huang/tags/css/">CSS</a></li>
      <li><a href="https://sky-haihai.github.io/Yaotian-Huang/tags/javascript/">JavaScript</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://sky-haihai.github.io/Yaotian-Huang/posts/uni/creating-a-diet-dashboard-based-on-angular/">
    <span class="title">« Prev</span>
    <br>
    <span>Creating a Diet Dashboard Based on Angular</span>
  </a>
  <a class="next" href="https://sky-haihai.github.io/Yaotian-Huang/posts/uni/information-retrieval-web-document-indexer-and-search-engine-prototype/">
    <span class="title">Next »</span>
    <br>
    <span>Information Retrieval: Web Document Indexer and Search Engine Prototype</span>
  </a>
</nav>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Secured Web Information System Prototype on twitter"
        href="https://twitter.com/intent/tweet/?text=Secured%20Web%20Information%20System%20Prototype&amp;url=https%3a%2f%2fsky-haihai.github.io%2fYaotian-Huang%2fposts%2funi%2fsecured-web-information-system-prototype%2f&amp;hashtags=Java%2cServlet%2cJSP%2cTomcat%2cHTML%2cCSS%2cJavaScript">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Secured Web Information System Prototype on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fsky-haihai.github.io%2fYaotian-Huang%2fposts%2funi%2fsecured-web-information-system-prototype%2f&amp;title=Secured%20Web%20Information%20System%20Prototype&amp;summary=Secured%20Web%20Information%20System%20Prototype&amp;source=https%3a%2f%2fsky-haihai.github.io%2fYaotian-Huang%2fposts%2funi%2fsecured-web-information-system-prototype%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Secured Web Information System Prototype on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fsky-haihai.github.io%2fYaotian-Huang%2fposts%2funi%2fsecured-web-information-system-prototype%2f&title=Secured%20Web%20Information%20System%20Prototype">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Secured Web Information System Prototype on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fsky-haihai.github.io%2fYaotian-Huang%2fposts%2funi%2fsecured-web-information-system-prototype%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Secured Web Information System Prototype on whatsapp"
        href="https://api.whatsapp.com/send?text=Secured%20Web%20Information%20System%20Prototype%20-%20https%3a%2f%2fsky-haihai.github.io%2fYaotian-Huang%2fposts%2funi%2fsecured-web-information-system-prototype%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Secured Web Information System Prototype on telegram"
        href="https://telegram.me/share/url?text=Secured%20Web%20Information%20System%20Prototype&amp;url=https%3a%2f%2fsky-haihai.github.io%2fYaotian-Huang%2fposts%2funi%2fsecured-web-information-system-prototype%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://sky-haihai.github.io/Yaotian-Huang/">Yaotian Huang</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
